# RectSlayer

### Проект по Визуелно Програмирање

Нашиот проект претставува игра, којашто е делумно инспирирана од играта BBTAN за мобилни телефони.
Целта на играта е преку пукање топчиња да не се дозволи правоаголниците да се спуштат најдоле. 
<br/><br/>

## Опис на играта

Играта има неколку видови на објекти: правоаголници, power-ups, топчиња и пукач односно играчот. <br/><br/>
На почетокот на секое ниво случајно се генерираат правоаголници, power-ups и празни места, а постоечките се поместуваат надоле.<br/><br/> 
Играчот се наоѓа најдоле. Почнува со 1 топче. Секогаш кога ќе успее да го погоди Plus powerup-от бројот на топчиња му се зголемува за 1.
По генерирање на ново ниво, играчот со кликање на екранот ги пука сите топчиња во таа насока и притоа му се прикажува линија за да знае каде точно ќе пука.<br/><br/>
Топчињата се движат во рамки на играта и може да се одбијат од рамките или ако удрат во некој правоаголник. Исто така може да ја променат насоката ако удрат во Random Direction powerup-от. Освен Plus и Random Direction, постојат уште два вида на power-ups: Vertical Hit и Horizontal Hit. Ако удри топчето во Vertical Hit power-up тогаш сите правоаголници што се наоѓаат во иста колона добиваат по еден удар, ако удри во Horizontal Hit тогаш сите правоаголници што се наоѓаат во иста редица добиваат по еден удар.<br/><br/>
Секој правоаголник во себе има и број на преостанати погодоци. При генерирање тој број се поставува да биде еднаков на бројот на нивото. При секој удар од топка или power-up, бројот се намалува за 1. Ако бројот се намали до 0, тогаш правоаголникот е уништен и исчезнува.<br/><br/>
Кога сите топчиња ќе паднат, тогаш се генерира ново ниво и играчот се поместува на позицијата на првата падната топка. 
При генерирање на ново ниво, загарантирано мора да има Plus power-up, а другите објекти случајно се генерираат.<br/><br/>
Ако некое топче има премногу мала вертикална брзина, играта исто така има и unstuck механизам кој што генерира RandomDirection power-up на позицијата на која што се наоѓа топчето.<br/><br/>
Играта завршува кога играчот нема да успее да уништи некој правоаголник и ќе му дозволи да се спушти до доле.<br/><br/>
Score во играта е бројот на моменталното ниво. High Score се чува само за тековната сесија и кога се гаси играта High Score се брише бидејќи играта е наменета за убивање досада, а не за компетитивно играње. <br/><br/>


## Screenshots и упатство за играње

<br/>
На почеток кога се вклучува играта се стартува главното мени.

![MainMenu](https://i.imgur.com/EvHDiPC.jpg)

Има две опции: почнување на нова игра (new game) и целосно гасење на играта (close).<br/><br/>
Кога ќе се започне нова игра се отвара нова форма во која се игра играта.

![RectSlayer](https://i.imgur.com/XGbICpC.jpg)

Кога играчот нема да успее да уништи некој правоаголник и тој ќе се спушти најдоле, тогаш се појавува
Dialog Box кој што го известува играчот дека играта завршила и го прашува дали сака да започне нова игра или не.

![GameOver](https://i.imgur.com/jgB5hCt.jpg)

Ако играчот избере да започне нова игра, тогаш играта се рестартира и повторно се почнува од ниво 1. Ако одбере да не започне нова игра тогаш играчот повторно се враќа кај главното мени.<br/><br/>

### Упатство

Играта се игра само со глувче. Играчот треба со глувчето да одреди насока. Кога ќе кликне, сите топчиња се пукаат во таа насока. Кога ќе паднат сите испукани топчиња тогаш се генерира ново ниво и играчот повторно може да пука. Со секој удар на топче во правоаголник, бројот на правоаголникот се намалува. Кога тој број ќе стане 0 тогаш играчот успешно го уништил правоаголникот и правоаголникот исчезнува.

Power-ups: ![VerticalHit](https://i.imgur.com/FtwH3Fa.png) ![HorizontalHit](https://i.imgur.com/XuFoJU2.png) ![RandomDirection](https://i.imgur.com/8Cj6E6y.png) ![Plus](https://i.imgur.com/IWJ88kZ.png)

- Првиот е Vertical Hit power-up. Кога топче ќе го погоди тој power-up сите правоаголници кои што се наоѓаат во иста колона примаат по 1 удар односно бројот им се намалува за 1.<br/>
- Вториот е Horizontal Hit power-up. Кога топче ќе го погоди тој power-up сите правоаголници кои што се наоѓаат во иста редица примаат по 1 удар односно бројот им се намалува за 1.<br/>
- Третиот е Random Direction и кога топче ќе го погоди овој power-up, добива рандом насока на движење.<br/>
- Четвртиот е Plus и кога топче ќе го погоди овој power-up, бројот на топчиња кои што играчот може да ги испука се зголемува за 1.<br/><br/>

Едно топче може еднаш да го искористи powerup-от при првиот допир и додека не го напушти нема право пак да го искористи. Откако веќе нема да се во допир, ако топчето повторно го допре powerup-от тогаш повторно ќе го искористи. Ако powerup-от не бил искористен од ниту едно топче, тој преживува и во следното ниво се поместува надоле.<br/>
Plus power-up може да биде искористен само еднаш и веднаш исчезнува.<br/>

## Имплементација

Нашата имплементација се состои од неколку класи: Ball, Rectangle, Shooter, PowerUp(и наследените класи од PowerUp: PlusPowerUp, RandomDirectionPowerUp, VerticalHitPowerUp, HorizontalHitPowerUp) и GameManager класа која управува со целата игра. Исто така имаме и помошна класа за генерирање PowerUp со помош на Factory Design Pattern, PowerUpFactory.<br/><br/>

GameManager класата во себе чува еден објект од класата Shooter чија што главна задача е испукување на топчињата. Во GameManager се чуваат и три листи, едната чува објекти од класата Rectangle, другата листа чува објекти од класата PowerUp а третата листа ги чува објектите од класата Ball кои што се живи во моментот.<br/>
Сите објекти во себе чуваат еден објект од класата Point кој што им ја покажува позицијата и исто така сите имаат Draw метод.<br/>
- Ball класата има метод Move со кој што објектот се придвижува и ако удри во рамките тогаш ја променува насоката. Исто така има и метод CheckCollision кој што прима аргумент Rectangle и проверува дали има колизија помеѓу топчето и правоаголникот, па соодветно на тоа ја променува насоката на топчето. Овој метод е сложен и користи многу математика за да одреди дали имало судир и ако имало судир како да ги промени хоризонталната и вертикалната брзина на топчето според тоа каде удрило топчето.
- PowerUp класата се справува со колизијата помеѓу топче и power-up. Исто така оваа класа чува листа од Ball објекти кои што го допираат powerup-от за да не може powerup-от да се активира повеќе пати од едно топче додека не престанат да се допираат. Секоја од наследените класи си има функција која што се повикува кога powerup-от ќе е активиран.
- GameManager класата се справува со многу работи и има многу методи. Има метод кој што пресметува агол за пукање помеѓу позицијата на Shooter објектот и точката на екранот која што била кликната. Исто така има метод кој што не дозволува пукање ако аголот е премногу мал. Има метод HandleLogic кој што се справува со цела логика, ги придвижува топките, проверува колизија, ги отстранува мртвите топки и правоаголници итн.. а за сето тоа нормално користи помошни методи. Исто така се справува и со промена на ниво, ги подместува живите објекти и генерира нови објекти. Проверува дали е game over и има уште многу други функционалности.
- Другите класи се прилично тривијални.

### Опис на класа или функција

<br/>
Класата PowerUpsFactory<br/><br/>


![PowerUpsFactory](https://i.imgur.com/JDTzKeM.jpg)

Оваа класа се состои од два методи, односно од еден overload-нат метод GeneratePowerUp. Разликата е во еден аргумент, кај првиот метод е string а кај вториот е int. Првиот метод прима објект од класата Point кој што му кажува на која позиција треба да се наоѓа објектот, а вториот параметар е string кој што му кажува од каков тип треба да биде објектот. Според тоа, методот проверува на што е еднаков стрингот, ако одговара на некоја од валидните опции тогаш го креира и го враќа соодветниот објект, ако стрингот не е валиден тогаш враќа null.<br/>
Кај вториот метод,вториот аргумент наместо string е int. Причината за тоа е потребата за генерирање случаен PowerUp - тоа го реализираме во GameManager класата со Random генератор, прво генерираме рандом број од 0 до 9 и потоа тој број го испраќаме кај овој метод а овој метод ни враќа соодветен PowerUp. Направено е HorizontalHit и VerticalHit да имаат веројатност за генерирање 4/10, RandomDirection да има 2/10, а Plus да се генерира само ако експлицитно е побарано, односно ако намерно се внесе број поголем од 9.



